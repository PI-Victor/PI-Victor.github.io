<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="X-UA-Compatible"
      content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css"
      integrity="sha512-EZLkOqwILORob+p0BXZc+Vm3RgJBOe1Iq/0fiI7r/wJgzOFZMlsqTa29UEl6v6U6gsV4uIpsNZoV32YZqrCRCQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-light.min.css"
      integrity="sha512-o5v54Kh5PH0dgnf9ei0L+vMRsbm5fvIvnR/XkrZZjN4mqdaeH7PW66tumBoQVIaKNVrLCZiBEfHzRY4JJSMK/Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      href="https://fonts.cdnfonts.com/css/raleway-5"
      rel="stylesheet" />
    <link
      href="assets/main.css"
      rel="stylesheet" />
    <title>Vue vs React</title>
  </head>
  <body>
    <div
      class="container"
      id="main">
      <div class="row">
        <div class="container">
          <a
            link=""
            href="index.html">
            Home
          </a>
        </div>
      </div>
      <div class="row">
        <div
          class="container"
          id="content">
          <p>Yep, it&#39;s the beginning of 2021 and it&#39;s one of those posts! I decided there aren&#39;t enough
of them on the internet and thought i might indulge in writing one :laughing:.  </p>
<p>This comes from my perspective as a beginner in both frameworks and i will be talking
about vue 2 not vue 3, i haven&#39;t rolled out, ported or even read anything on vue 3 yet.  </p>
<p>Let me explain the needs that have surfaced while building fullstack apps in my current job:</p>
<ul>
<li>simple frontend, needs to be good enough</li>
<li>some user data persistence is needed, but should be stored in the browser</li>
<li>nothing fancy for CSS</li>
<li>link sharing not necessary, so the standard <a href="https://router.vuejs.org/guide/essentials/history-mode.html#html5-history-mode">hash mode</a>
does the job</li>
<li>gRPC communication with the backend</li>
<li>pick something simple enough that anyone, even those who hate frontend, are capable to quickly
make a change</li>
</ul>
<h2 id="vue">Vue</h2>
<p>Vue was the right pick, not because it&#39;s superior to React, but because for this use case it
was the right tool. It fits all of the points above. We used Vue (vue, vue-router and vuex) for
creating UIs that serve everyday internal company purposes. </p>
<p>Create the app with <a href="https://cli.vuejs.org/">vue-cli</a> and you already have pretty much everything
you need.<br>For routing, vue-router is straight forward and requires very little configuration.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">VueRouter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span>;
<span class="hljs-comment">// we&#x27;ll get to the store in an example below</span>
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/store&quot;</span>;

<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">VueRouter</span>);

<span class="hljs-comment">// use a login guard and check if the user is authenticated</span>
<span class="hljs-comment">// the &#x27;auth/loggedIn&#x27; part is covered in the store code</span>
<span class="hljs-comment">// example below.</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loginGuard</span> = (<span class="hljs-params">_, __, next</span>) =&gt;
  store.<span class="hljs-property">getters</span>[<span class="hljs-string">&quot;auth/loggedIn&quot;</span>] ? <span class="hljs-title function_">next</span>() : <span class="hljs-title function_">next</span>(<span class="hljs-string">&quot;/login&quot;</span>);

<span class="hljs-keyword">const</span> routes = [
    {
        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/myRouter&quot;</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;myComponent&quot;</span>,
        <span class="hljs-attr">beforeEnter</span>: loginGuard,
        <span class="hljs-comment">// lazy load component for the route. this is for bigger apps and not</span>
        <span class="hljs-comment">// necessary in smaller apps.</span>
        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: &quot;myComponent&quot; */</span> <span class="hljs-string">&quot;@/views/myComponent.vue&quot;</span>),
        <span class="hljs-comment">// pass metadata. in this example we also want to render the navbar, </span>
        <span class="hljs-comment">// since this is a route where the component needs to have the navbar rendered.</span>
        <span class="hljs-attr">meta</span>: { <span class="hljs-attr">navbar</span>: <span class="hljs-literal">true</span> },
    }
]
</code></pre>
<p>Of course this is a very straight forward example of a simple application, but this does get the
job done for our use case.</p>
<p><em>Note:This step is optional if managing state at the component level is not enough for your
application.</em></p>
<p>For (global) state management, you can use vuex. Configuring a vuex instance is also easy and
straight forward. But what about our requirement of storing some data in the browser? Well,
initially i ended up using cookies, but it turned out in the long run, this was not necessary and
 ended up using the browser localStorage thanks to
<a href="https://github.com/robinvdvleuten/vuex-persistedstate">vuex-persistedstate</a>.</p>
<p>For configuring the store, we will break this into multiple examples:</p>
<p>Plugin config <code>plugins/persistence.js</code></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> createPersistedState <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vuex-persistedstate&quot;</span>;

<span class="hljs-comment">// the lib defaults to using the localStorage API </span>
<span class="hljs-comment">// whenever no config is passed</span>
<span class="hljs-comment">// this can also be configure to persist state in</span>
<span class="hljs-comment">// cookies, refer to the docs for that.</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">createPersistedState</span>({});
</code></pre>
<p>auth state module <code>store/auth.js</code></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> state = { <span class="hljs-attr">username</span>: <span class="hljs-literal">null</span> };

<span class="hljs-keyword">const</span> getters = {
    <span class="hljs-comment">// returns whether a user has been added to the store or not.</span>
    <span class="hljs-attr">loggedIn</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">username</span> !== <span class="hljs-literal">null</span>,
};

<span class="hljs-keyword">const</span> actions = {
    <span class="hljs-comment">// this can be used from a login component such as a login form</span>
    <span class="hljs-comment">// to set the username </span>
    <span class="hljs-attr">logIn</span>: <span class="hljs-function">(<span class="hljs-params">{commit}, payload</span>) =&gt;</span> <span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;setUsername&quot;</span>, payload)
};

<span class="hljs-keyword">const</span> mutations = {
    <span class="hljs-comment">// the vuex store, as with other stores, splits its functionality</span>
    <span class="hljs-comment">// in multiple ways, mutations ensure synchronous mutation of the</span>
    <span class="hljs-comment">// state tree.</span>
    <span class="hljs-title function_">setUsername</span>(<span class="hljs-params">state, username</span>) {
        state.<span class="hljs-property">username</span> = username;
    }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>,
    state,
    getters,
    actions,
    mutations,
}
</code></pre>
<p>Store config <code>store/index.js</code></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vuex&quot;</span>;

<span class="hljs-keyword">import</span> auth <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/store/auth&quot;</span>;

<span class="hljs-keyword">import</span> persistence <span class="hljs-string">&quot;@/plugins/persistence&quot;</span>;

<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
    <span class="hljs-attr">modules</span>: { auth },
    <span class="hljs-attr">plugins</span>: [persistence],
})
</code></pre>
<p>With these very basic building blocks in place you can now manage routes, state and
persist the state into the browser&#39;s localStorage.  </p>
<p>But what about async data fetching or anything of that sort?  </p>
<p>It&#39;s simple, just stick it into an action:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> state = { <span class="hljs-attr">items</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> };

<span class="hljs-keyword">const</span> getters = {
    <span class="hljs-attr">items</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">items</span>,
    <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">error</span>,
};

<span class="hljs-keyword">const</span> actions = {
    <span class="hljs-keyword">async</span> <span class="hljs-attr">getItems</span>: <span class="hljs-function">(<span class="hljs-params">{ commit }</span>) =&gt;</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> grpc.<span class="hljs-title function_">getItems</span>();
            <span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;setItems&#x27;</span>, data);
        } <span class="hljs-keyword">catch</span>(error) {
            <span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;setError&#x27;</span>, error);
        }
    },
};

<span class="hljs-keyword">const</span> mutations = {
    <span class="hljs-title function_">setItems</span>(<span class="hljs-params">state, payload</span>) {
        state.<span class="hljs-property">items</span> = payload.<span class="hljs-property">items</span>;
    },
    <span class="hljs-title function_">setError</span>(<span class="hljs-params">state, err</span>) {
        state.<span class="hljs-property">error</span> = err;
    },
};
</code></pre>
<p>Now your components can take advantage of state and update.</p>
<h2 id="conclusion">Conclusion</h2>
<p>My basic knowledge of frontend comes mostly from pair programming with my colleague
<a href="https://github.com/escodebar">Pablo</a>.<br>He said an interesting thing, that Vue is about conventions and i believe this plays
a major role when trying to learn a new technology.  </p>
<p>If a framework defines conventions for how to structure your application, it makes it
considerably easier for you to code, thus making the learning curve small. Conventions
are important to beginners, they take away some of the headache of trying to account
for all the variables that come into play when writing frontend apps.  </p>

        </div>
      </div>
      <div class="row">
        <div
          class="container"
          id="slugs">
          <a>#vue&nbsp;</a>
          <a>#frontend&nbsp;</a>
          <a>#react&nbsp;</a>
          <a>#javascript&nbsp;</a>
          <a>#vuex&nbsp;</a>
          <a>#vue-router&nbsp;</a>
        </div>
      </div>
      <div class="row">
        <div
          class="container"
          style="text-align: center; padding-top: 15px">
          <p>
            Made by me, compiled with
            <a href="https://github.com/pi-victor/pi-victor.github.io"
              >typescript and deno</a
            >.
          </p>
        </div>
      </div>
    </div>
  </body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
</html>
